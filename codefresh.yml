version: '1.0'
## PUB
steps:

  setup-builder:
    type: build
    description: create Pumba Go builder image (Go, tools, and libraries)
    dockerfile: Build.Dockerfile
    image-name: verchol/builder
    tag: test

  #push-step:
  #  type: push
  #  description: Free text description
  #  candidate: verchol/builder
  #  tag: test


  compile-pubma:
    description: compile Pumba binary, using builder image
    image: ${{setup-builder}}
    working-directory: ${{initial-clone}}
    commands:
    - ls -al
    - script/go_build.sh

  go-pumba:
    description: compile Pumba binary, using builder image
    image: ${{setup-builder}}
    working-directory: ${{initial-clone}}
    commands:
      - ls ./.dist


  #package-pumba:
  #  type: build
  #  description: build Pumba into Docker container
  #  image-name: pumba/pumba
  #  tag: cf
